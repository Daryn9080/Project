<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>S&B admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/display.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Roboto:wght@300&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="header">
      <div class="innerheader">
        <div class="logocontainer">
          <h1><span>Users</span></h1>
        </div>
        <button class="btn" type="submit" name="button" id = "reg" value="submit">Add User</button><br>
        <ul class="navigation">
          <a href="/display" style="color : white">GO back</a>
        </ul>
      </div>
    </div>
    <br>
    <h3>Sort by</h3>
    <div>
      <table class="table table-zebra">
        <thead>
          <tr>
            <th>â„–</th>
            <form action="/adminPanel" method="post">
              <th><button class="btn" type="submit" name="sortBy" value="name">name</button></th>
              <th><button class="btn" type="submit" name="sortBy" value="city">city</button> </th>
              <th><button class="btn" type="submit" name="sortBy" value="email">email</button> </th>
            </form>
            <th>password</th>
            <th>isAdmin</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% for(var i = 0; i < allUsers.length; i ++){ %>
            <tr>
              <%if (!allUsers[i].isAdmin){ %>
                <td><%= i+1 %></td>
                <td><%= allUsers[i].name %></td>
                <td><%= allUsers[i].city %></td>
                <td><%= allUsers[i].email %></td>
                <td><%= allUsers[i].password %></td>
                <td><%= allUsers[i].isAdmin %></td>
                <td style="display: flex; flex-direction: row;">
                  <form class="" action="/deleteUser" method="post">
                    <button type="submit" name="deleteCurrent" value= <%=allUsers[i].id %> > delete </button>
                  </form>
                  <!-- <form class="" action="/editUser" method="post"> -->
                    <button type="button" name="editCurrent" value= <%=allUsers[i].id %> > edit </button>
                  <!-- </form> -->
                </td>
              <%}%>
            </tr>
          <% } %>
        </tbody>
      </table>

    </div>
        <!-- The Modal -->
    <div id="regModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <form class="" action="/addUser" method="post">
          <center>
          <table>
            <div class="form-field">
              <tr>
                <td><label for=""></label></td>
                <td><input type="text" name="name" placeholder="Enter name"></td>
              </tr>
            </div>
            <div class="form-field">
              <tr>
                <td><label for=""></label></td>
                <td><input type="text" name="age" placeholder="Enter age"></td>
              </tr>
            </div>
            <div class="form-field">
              <tr>
                <td><label for=""></label></td>
                <td><input type="text" name="email" placeholder="Enter email"></td>
              </tr>
            </div>
            <div class="form-field">
              <tr>
                <td><label for=""></label></td>
                <td><input type="text" name="city" placeholder="Enter city"></td>
              </tr>
            </div>
            <div class="form-field">
              <tr>
                <td><label for=""></label></td>
                <td><input type="password" name="password1" id = "psw1" placeholder="Enter password"></td>
                <span id = message1 style="color:red"></span><br>
              </tr>
            </div>
          </table>
          <br>
          <button type="submit" name="button" class="submitForm" value="submit">Send</button><br>
          <!-- <button type="reset" name="reset" class="button"value="reset">Reset</button><br> -->
        </center>
        </form>

      </div>

    </div>
  <br>
    <script>
      var modal = document.getElementById("regModal");// Get the modal
      var btn = document.getElementById("reg");// Get the button that opens the modal
      var span = document.getElementsByClassName("close")[0];// Get the <span> element that closes the modal
      btn.onclick = function() {    // When the user clicks the button, open the modal
        modal.style.display = "block";
      }
      span.onclick = function() {// When the user clicks on <span> (x), close the modal
        modal.style.display = "none";
      }
      window.onclick = function(event) {// When the user clicks anywhere outside of the modal, close it
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }

    </script>
  </body>
</html>
